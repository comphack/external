language: cpp

cache:
  directories:
    - cache

jobs:
  include:
    - stage: "Build"
      name: "Build (Linux GCC)"
      os: linux
      dist: trusty
      sudo: required
      compiler: gcc
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-5
      env:
        - COMPILER_CC=gcc-5
        - COMPILER_CXX=g++-5
        - PLATFORM=gcc5
      script: ci/linux-build.sh
      deploy:
        provider: releases
        api_key:
          secure: CdaO1tOo6qj8koBffEeD8epEZZ9dd8Idkm5MuZzlx4M0ek23i1aopXU8C5HyV5RBCNY66tf24ZYiHQDUTZye31nEvjI8cipqE4jupt7Rwyltps/h1ILVu2/8teoq/1ej05hTrUSOVWz3qFQaxUqkpjC/1u3rMH64RrPgW07a59TNzwjPtlj7fShkufLIDF7wymMwMjEd0GJVXZdGT/7NyN15btU7rvciWpAvCxdfoeeQnRaph+DeZ+DUAQ6dycZJmtSQ9V0eqtR8OFOpf8RSwGjdy0OLol2bu5/sRXH1h2UV4Tx3RgWpZiJOIvrWUekX36vvkIif4HMqx+xKK84pOouEaKyCmNjtyov36Vo5HQNtxccitedli84gGWdiFXB2wq5Gxy+ibGJn8ldHKY4gTDbYA+gBq+48AvKqfCpgbGSAEdbdk0Q8E/z67aYtNIyZgrPLNgVEbKquR8a9Ky6O3/upVuFaBNTKV8souKJTWirAxEBEE/bgxReJxJR9QY3Ti0+TTtd8ilA4+kLqV617gPePIounyxbi3s3MJVV/rtoZc0clL0e7HPNzk/0kiRewpUub4fVXL9bCeFnFNPIGLAzZAhh8fnBCD4txhhuGuJVG9cKGnhjMST2KBz+KIcjoozlIjQT7Lkpf7lVLxvXr679cl+dbo8+XdDtOClo2G3c=
        skip_cleanup: true
        file_glob: true
        file: external*.tar.bz2
        on:
          repo: comphack/external
          branch: develop

    - stage: "Build"
      name: "Build (Linux Clang)"
      os: linux
      dist: trusty
      sudo: required
      compiler: clang
      env:
        - PLATFORM=clang
        - COMPILER_CC=clang
        - COMPILER_CXX=clang++
      script: ci/linux-build.sh
      deploy:
        provider: releases
        api_key:
          secure: CdaO1tOo6qj8koBffEeD8epEZZ9dd8Idkm5MuZzlx4M0ek23i1aopXU8C5HyV5RBCNY66tf24ZYiHQDUTZye31nEvjI8cipqE4jupt7Rwyltps/h1ILVu2/8teoq/1ej05hTrUSOVWz3qFQaxUqkpjC/1u3rMH64RrPgW07a59TNzwjPtlj7fShkufLIDF7wymMwMjEd0GJVXZdGT/7NyN15btU7rvciWpAvCxdfoeeQnRaph+DeZ+DUAQ6dycZJmtSQ9V0eqtR8OFOpf8RSwGjdy0OLol2bu5/sRXH1h2UV4Tx3RgWpZiJOIvrWUekX36vvkIif4HMqx+xKK84pOouEaKyCmNjtyov36Vo5HQNtxccitedli84gGWdiFXB2wq5Gxy+ibGJn8ldHKY4gTDbYA+gBq+48AvKqfCpgbGSAEdbdk0Q8E/z67aYtNIyZgrPLNgVEbKquR8a9Ky6O3/upVuFaBNTKV8souKJTWirAxEBEE/bgxReJxJR9QY3Ti0+TTtd8ilA4+kLqV617gPePIounyxbi3s3MJVV/rtoZc0clL0e7HPNzk/0kiRewpUub4fVXL9bCeFnFNPIGLAzZAhh8fnBCD4txhhuGuJVG9cKGnhjMST2KBz+KIcjoozlIjQT7Lkpf7lVLxvXr679cl+dbo8+XdDtOClo2G3c=
        skip_cleanup: true
        file_glob: true
        file: external*.tar.bz2
        on:
          repo: comphack/external
          branch: develop

    - stage: "Build"
      name: "Windows (VS2017 32-bit)"
      os: windows
      env:
        - PLATFORM=win32
        - QT5_BASE_DIR=C:/Qt/5.12.3/msvc2017
      script: ci/windows-build.sh
      deploy:
        provider: releases
        api_key:
          secure: CdaO1tOo6qj8koBffEeD8epEZZ9dd8Idkm5MuZzlx4M0ek23i1aopXU8C5HyV5RBCNY66tf24ZYiHQDUTZye31nEvjI8cipqE4jupt7Rwyltps/h1ILVu2/8teoq/1ej05hTrUSOVWz3qFQaxUqkpjC/1u3rMH64RrPgW07a59TNzwjPtlj7fShkufLIDF7wymMwMjEd0GJVXZdGT/7NyN15btU7rvciWpAvCxdfoeeQnRaph+DeZ+DUAQ6dycZJmtSQ9V0eqtR8OFOpf8RSwGjdy0OLol2bu5/sRXH1h2UV4Tx3RgWpZiJOIvrWUekX36vvkIif4HMqx+xKK84pOouEaKyCmNjtyov36Vo5HQNtxccitedli84gGWdiFXB2wq5Gxy+ibGJn8ldHKY4gTDbYA+gBq+48AvKqfCpgbGSAEdbdk0Q8E/z67aYtNIyZgrPLNgVEbKquR8a9Ky6O3/upVuFaBNTKV8souKJTWirAxEBEE/bgxReJxJR9QY3Ti0+TTtd8ilA4+kLqV617gPePIounyxbi3s3MJVV/rtoZc0clL0e7HPNzk/0kiRewpUub4fVXL9bCeFnFNPIGLAzZAhh8fnBCD4txhhuGuJVG9cKGnhjMST2KBz+KIcjoozlIjQT7Lkpf7lVLxvXr679cl+dbo8+XdDtOClo2G3c=
        skip_cleanup: true
        file_glob: true
        file: external*.zip
        on:
          repo: comphack/external
          branch: develop

    - stage: "Build"
      name: "Windows (VS2017 64-bit)"
      os: windows
      env:
        - PLATFORM=win64
        - QT5_BASE_DIR=C:/Qt/5.12.3/msvc2017_64
      script: ci/windows-build.sh
      deploy:
        provider: releases
        api_key:
          secure: CdaO1tOo6qj8koBffEeD8epEZZ9dd8Idkm5MuZzlx4M0ek23i1aopXU8C5HyV5RBCNY66tf24ZYiHQDUTZye31nEvjI8cipqE4jupt7Rwyltps/h1ILVu2/8teoq/1ej05hTrUSOVWz3qFQaxUqkpjC/1u3rMH64RrPgW07a59TNzwjPtlj7fShkufLIDF7wymMwMjEd0GJVXZdGT/7NyN15btU7rvciWpAvCxdfoeeQnRaph+DeZ+DUAQ6dycZJmtSQ9V0eqtR8OFOpf8RSwGjdy0OLol2bu5/sRXH1h2UV4Tx3RgWpZiJOIvrWUekX36vvkIif4HMqx+xKK84pOouEaKyCmNjtyov36Vo5HQNtxccitedli84gGWdiFXB2wq5Gxy+ibGJn8ldHKY4gTDbYA+gBq+48AvKqfCpgbGSAEdbdk0Q8E/z67aYtNIyZgrPLNgVEbKquR8a9Ky6O3/upVuFaBNTKV8souKJTWirAxEBEE/bgxReJxJR9QY3Ti0+TTtd8ilA4+kLqV617gPePIounyxbi3s3MJVV/rtoZc0clL0e7HPNzk/0kiRewpUub4fVXL9bCeFnFNPIGLAzZAhh8fnBCD4txhhuGuJVG9cKGnhjMST2KBz+KIcjoozlIjQT7Lkpf7lVLxvXr679cl+dbo8+XdDtOClo2G3c=
        skip_cleanup: true
        file_glob: true
        file: external*.zip
        on:
          repo: comphack/external
          branch: develop
